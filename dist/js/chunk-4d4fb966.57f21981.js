(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d4fb966"],{"07ac":function(t,e,r){var a=r("23e7"),i=r("6f53").values;a({target:"Object",stat:!0},{values:function(t){return i(t)}})},"13d5":function(t,e,r){"use strict";var a=r("23e7"),i=r("d58f").left,n=r("a640"),s=r("ae40"),o=r("2d00"),l=r("605d"),c=n("reduce"),d=s("reduce",{1:0}),u=!l&&o>79&&o<83;a({target:"Array",proto:!0,forced:!c||!d||u},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2532:function(t,e,r){"use strict";var a=r("23e7"),i=r("5a34"),n=r("1d80"),s=r("ab13");a({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(n(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"34f8":function(t,e,r){},"44b8":function(t,e,r){"use strict";r("f360")},"596b":function(t,e,r){"use strict";r("34f8")},"5a34":function(t,e,r){var a=r("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"6f53":function(t,e,r){var a=r("83ab"),i=r("df75"),n=r("fc6a"),s=r("d1e7").f,o=function(t){return function(e){var r,o=n(e),l=i(o),c=l.length,d=0,u=[];while(c>d)r=l[d++],a&&!s.call(o,r)||u.push(t?[r,o[r]]:o[r]);return u}};t.exports={entries:o(!0),values:o(!1)}},9820:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"store-cart"},[a("StoreNav"),t.cart.length?a("a-row",{staticClass:"inner"},[a("a-col",{staticClass:"carts",attrs:{sm:24,md:12}},[a("p",{staticClass:"heading utm"},[t._v(" YOU’RE BUYING ")]),t._l(t.cartItems,(function(e,i){return a("div",{key:i,staticClass:"cart-item"},[a("div",{staticClass:"info"},[a("div",{staticClass:"image",style:{backgroundImage:"url('"+e.product_image+"')"}}),a("div",{staticClass:"details"},[a("p",{staticClass:"name utm"},[t._v(" "+t._s(e.product_name)+" ")]),a("div",{staticClass:"desc"},[a("span",[t._v(" "+t._s(e.first_variant_name?e.first_variant_name+":":"")+" "+t._s(e.picked_variant_value[0]?e.picked_variant_value[0]+",":"")+" "+t._s(" ")+" "+t._s(e.second_variant_name?e.second_variant_name+":":"")+" "+t._s(e.picked_variant_value[1])+" ")])]),a("div",{staticClass:"count"},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:r("c637"),alt:""},on:{click:function(r){return t.removeFromCart(e.id)}}}),a("div",{staticClass:"grey"},[a("svg",{staticStyle:{cursor:"pointer"},attrs:{width:"14",height:"2",viewBox:"0 0 14 2",fill:"none",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(r){return t.changeCount("down",e.id)}}},[a("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 1C0 0.44772 0.44772 0 1 0H13C13.5523 0 14 0.44772 14 1C14 1.5523 13.5523 2 13 2H1C0.44772 2 0 1.5523 0 1Z",fill:"#8093AD"}})]),a("span",{staticClass:"utb"},[t._v(t._s(e.qty_requested))]),a("svg",{staticStyle:{cursor:"pointer"},attrs:{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(r){return t.changeCount("up",e.id)}}},[a("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 0C5.5523 0 6 0.44772 6 1V4H9C9.5523 4 10 4.44772 10 5C10 5.5523 9.5523 6 9 6H6V9C6 9.5523 5.5523 10 5 10C4.44771 10 4 9.5523 4 9V6H1C0.44772 6 0 5.5523 0 5C0 4.44771 0.44772 4 1 4H4V1C4 0.44772 4.44771 0 5 0Z",fill:"#8093AD"}})])])])])])])}))],2),a("a-col",{staticClass:"form",attrs:{sm:24,md:12}},[a("div",{staticClass:"grey-fields"},[a("p",[a("span",{staticClass:"info"},[t._v(" Sub total ("+t._s(this.cart.length)+" items) ")]),a("span",{staticClass:"price utm"},[t._v(" N"+t._s(t.numeral(t.total).format("0,0"))+" ")])]),a("a-button",{staticClass:"main-btn",on:{click:t.submit}},[t._v(" Enter delivery address ")])],1)])],1):a("div",{staticClass:"empty"},[a("img",{attrs:{src:r("54e8"),alt:""}}),a("p",{staticClass:"utm"},[t._v(" You’ve not added any product to cart ")]),a("router-link",{attrs:{to:"/"+t.$route.params.store_name}},[a("button",{staticClass:"main-btn"},[t._v(" Start shopping ")])])],1),a("a-drawer",{attrs:{placement:"right",closable:!1,visible:t.visible,width:t.drawerWidth,maskStyle:{backgroundColor:"rgba(16, 16, 44, 0.25);"}}},[a("div",{staticClass:"drawer-title",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"utb"},[t._v(" Complete purchase ")]),a("img",{staticStyle:{cursor:"pointer"},attrs:{src:r("bf37"),alt:""},on:{click:t.closeDrawer}})]),a("AddressForm")],1)],1)},i=[],n=(r("4de4"),r("7db0"),r("d81d"),r("13d5"),r("5530")),s=r("f29b"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"address-form"},[r("FloatingLabel",{attrs:{config:Object.assign({},{label:"Name"},t.floatingConfig,{hasContent:!0})}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.delivery_details.full_name,expression:"delivery_details.full_name"}],attrs:{name:"Name"},domProps:{value:t.delivery_details.full_name},on:{input:function(e){e.target.composing||t.$set(t.delivery_details,"full_name",e.target.value)}}})]),r("FloatingLabel",{attrs:{config:Object.assign({},{label:"Email address"},t.floatingConfig,{hasContent:!0})}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.delivery_details.email,expression:"delivery_details.email"}],attrs:{name:"email"},domProps:{value:t.delivery_details.email},on:{input:function(e){e.target.composing||t.$set(t.delivery_details,"email",e.target.value)}}})]),r("FloatingLabel",{attrs:{config:Object.assign({},{label:"Phone no."},t.floatingConfig,{hasContent:!0})}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.delivery_details.phone,expression:"delivery_details.phone"}],attrs:{name:"phone"},domProps:{value:t.delivery_details.phone},on:{input:function(e){e.target.composing||t.$set(t.delivery_details,"phone",e.target.value)}}})]),r("FloatingLabel",{attrs:{config:Object.assign({},{label:"Delivery address"},t.floatingConfig,{hasContent:!0})}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.delivery_details.address,expression:"delivery_details.address"}],attrs:{name:"address"},domProps:{value:t.delivery_details.address},on:{input:function(e){e.target.composing||t.$set(t.delivery_details,"address",e.target.value)}}})]),r("FloatingLabel",{attrs:{config:Object.assign({},{label:"Select shipping area"},t.floatingConfig,{hasContent:!0})}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],staticStyle:{width:"100%",height:"100%",border:"0",background:"transparent","padding-top":"10px !important"},attrs:{name:"shipping"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.city=e.target.multiple?r:r[0]}}},t._l(t.zones,(function(e){return r("option",{key:e.zone,domProps:{value:e}},[t._v(t._s(e.zone))])})),0)]),r("div",{staticClass:"grey-fields"},[r("p",[r("span",{staticClass:"info"},[t._v(" Sub total ("+t._s(this.cart.length)+" items) ")]),r("span",{staticClass:"price utm"},[t._v(" ₦"+t._s(t.numeral(t.total).format("0,0"))+" ")])]),r("p",[r("span",{staticClass:"info"},[t._v(" Delivery fee ")]),r("span",{staticClass:"price utm"},[t._v(" ₦"+t._s(t.numeral(t.city.price).format("0,0"))+" ")])]),r("p",{staticStyle:{border:"0",padding:"0",margin:"0"}},[r("span",{staticClass:"info utm",staticStyle:{color:"#10102C"}},[t._v(" Total ")]),r("span",{staticClass:"price utm",staticStyle:{color:"#10102C"}},[t._v(" ₦"+t._s(t.numeral(parseFloat(t.total)+parseFloat(t.city.price)).format("0,0"))+" ")])])]),r("a-button",{staticClass:"main-btn",staticStyle:{"margin-top":"20px",width:"100%",height:"50px"},attrs:{loading:t.loading},on:{click:function(e){return t.saveOrderHandler()}}},[t._v(" Place order ")])],1)},l=[],c=(r("caad"),r("fb6a"),r("d3b7"),r("07ac"),r("ac1f"),r("25f0"),r("2532"),r("1276"),r("9c5b")),d=r.n(c),u=r("6612"),f=r.n(u),m=r("2f62"),p=r("b7ec"),v=r("34fa"),h=r("be16"),g={data:function(){return{loading:!1,delivery_details:{full_name:"",email:"",phone:"",address:""},orderID:"",floatingConfig:{hasClearButton:!1,line:!1,labelOffset:{left:20,top:10},colors:{focusColor:"#3A50D5",errorColor:"#ff0000",lineColor:"#128CED",blurredColor:"#66768A"}},city:{zone:"",price:0}}},components:{FloatingLabel:d.a},computed:Object(n["a"])(Object(n["a"])({},Object(m["b"])({cart:"getVisitorCart",storeItems:"getVisitorStore",storeInfo:"getVisitedStoreInfo"})),{},{zones:function(){var t=this.storeInfo.default_shipping?this.storeInfo.default_shipping.split(","):[],e=t.map((function(e,r){var a={};return r%2===0?(a={zone:e,price:t[r+1]},a):null})).filter((function(t){return t}));return e},cartItems:function(){return this.cart},total:function(){return this.cartItems.reduce((function(t,e){return t+=e.qty_requested*e.price,t}),0)},order:function(){var t=this;return this.cartItems.map((function(e,r){var a={};return a.index=r+1,a.order=t.orderID,a.product=e.id,a.selected_option1=e.picked_variant_value[0],a.selected_option2=e.picked_variant_value[1],a.qty=e.qty_requested,a.productid=e.id,a.sub_total=t.numeral(parseFloat(e.price)*parseFloat(e.qty_requested)).format("0,0"),a}))}}),methods:{numeral:f.a,createOrderID:function(){var t="1",e=Math.floor(9999*Math.random())+1e3,r=new Date,a=r.getFullYear().toString().slice(-2),i=this.storeInfo.id.toString(),n=(r.getMonth()+1).toString(),s=r.getDate().toString(),o=this.cartItems.length.toString(),l=r.getHours().toString(),c=r.getMinutes().toString(),d=r.getSeconds().toString();1==l.length&&(l="0"+l),1==c.length&&(c="0"+c),1==d.length&&(d="0"+d),1==n.length&&(n="0"+n),1==s.length&&(s="0"+s),1==o.length&&(o="0"+o),1==i.length&&(i="000"+i),2==i.length&&(i="00"+i),3==i.length&&(i="0"+i),this.orderID=t+i+n+s+o+a+e},saveOrderHandler:function(){var t=this;this.createOrderID();var e={address:this.delivery_details.address,email:this.delivery_details.email,full_name:this.delivery_details.full_name,items_count:this.cartItems.reduce((function(t,e){return t+=e.qty_requested,t}),0),total_amount:100*parseFloat(this.total),unique_items:this.cartItems.length,order_ref:this.orderID,phone:this.delivery_details.phone,city:this.city.zone,products_total:this.numeral(this.total).format("0,0"),shipping:this.numeral(this.city.price).format("0,0"),store:this.storeInfo.id};Object.values(e).includes("")?h["a"].$emit("open_alert","error","Please fill in all fields"):(this.loading=!0,Object(p["d"])(e).then((function(){t.createOrderItems()})).catch((function(){t.loading=!1,h["a"].$emit("open_alert","error","An error occured. Please try again")})))},createOrderItems:function(){var t=this;Object(p["a"])(this.order).then((function(){t.payWithPaystack()})).catch((function(){h["a"].$emit("open_alert","error","An error occured. Please try again")})).finally((function(){return t.loading=!1}))},payWithPaystack:function(){var t=this,e=PaystackPop.setup({key:this.storeInfo.paystack_public_key,email:this.delivery_details.email,amount:100*(parseFloat(this.total)+parseFloat(this.city.price)),currency:"NGN",ref:this.orderID,metadata:{custom_fields:[{store:this.storeInfo.id}]},callback:function(e){t.$store.commit(v["j"],[]),t.$store.commit(v["a"],{email:t.delivery_details.email,orderID:t.orderID}),t.orderID="",h["a"].$emit("closeDrawer"),t.$router.push("/confirmation")},onClose:function(){console.log("window closed")}});e.openIframe()}}},_=g,y=(r("596b"),r("2877")),b=Object(y["a"])(_,o,l,!1,null,"71bfc8e5",null),C=b.exports,w={data:function(){return{visible:!1}},components:{StoreNav:s["a"],AddressForm:C},computed:Object(n["a"])(Object(n["a"])({},Object(m["b"])({cart:"getVisitorCart",storeItems:"getVisitorStore",storeInfo:"getVisitedStoreInfo"})),{},{drawerWidth:function(){return window.innerWidth>640?640:window.innerWidth},cartItems:function(){var t=this;return this.storeItems.filter((function(e){return t.cart.find((function(t){return t.id===e.id}))})).map((function(e){return Object(n["a"])(Object(n["a"])({},e),{},{qty_requested:t.cart.find((function(t){return t.id===e.id})).qty_requested})}))},total:function(){return this.cartItems.reduce((function(t,e){return t+=e.qty_requested*e.price,t}),0)}}),methods:{numeral:f.a,closeDrawer:function(){this.visible=!1},submit:function(){this.visible=!0},removeFromCart:function(t){var e=this.cartItems.filter((function(e){return e.id!==t}));this.$store.commit(v["j"],e)},changeCount:function(t,e){var r=this.cart.map((function(r){if(r.id===e){var a="up"===t?r.qty_requested+=1:r.qty_requested>1?r.qty_requested-=1:1;return Object(n["a"])(Object(n["a"])({},r),{},{qty_requested:a})}return r}));this.$store.commit(v["j"],r)}},mounted:function(){var t=this;h["a"].$on("closeDrawer",(function(){return t.closeDrawer()}))}},I=w,S=(r("44b8"),Object(y["a"])(I,a,i,!1,null,"60246585",null));e["default"]=S.exports},ab13:function(t,e,r){var a=r("b622"),i=a("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,"/./"[t](e)}catch(a){}}return!1}},c637:function(t,e,r){t.exports=r.p+"img/trash.bfc120cc.svg"},caad:function(t,e,r){"use strict";var a=r("23e7"),i=r("4d64").includes,n=r("44d2"),s=r("ae40"),o=s("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!o},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")},d58f:function(t,e,r){var a=r("1c0b"),i=r("7b0b"),n=r("44ad"),s=r("50c4"),o=function(t){return function(e,r,o,l){a(r);var c=i(e),d=n(c),u=s(c.length),f=t?u-1:0,m=t?-1:1;if(o<2)while(1){if(f in d){l=d[f],f+=m;break}if(f+=m,t?f<0:u<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:u>f;f+=m)f in d&&(l=r(l,d[f],f,c));return l}};t.exports={left:o(!1),right:o(!0)}},f360:function(t,e,r){}}]);
//# sourceMappingURL=chunk-4d4fb966.57f21981.js.map